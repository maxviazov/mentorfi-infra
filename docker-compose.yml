services:
    redpanda:
        image: redpandadata/redpanda:latest
        container_name: redpanda
        command:
            - redpanda
            - start
            - --overprovisioned
            - --smp 1
            - --memory 1G
            - --reserve-memory 0M
            - --node-id 0
            - --check=false
            - --kafka-addr PLAINTEXT://0.0.0.0:9092,OUTSIDE://0.0.0.0:19092
            - --advertise-kafka-addr PLAINTEXT://redpanda:9092,OUTSIDE://localhost:19092
        ports:
            - "9092:9092"
            - "19092:19092"
            - "9644:9644" # Redpanda admin HTTP

    redpanda-console:
        image: redpandadata/console:latest
        container_name: redpanda-console
        environment:
            - KAFKA_BROKERS=redpanda:9092
        ports:
            - "8081:8080"
        depends_on:
            - redpanda